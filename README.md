# vasp-Raman calculation

main file:
``` 
./0-run-Raman.sh  
```
Raman off-resonant activity calculator using VASP as a back-end. 

ref: https://github.com/raman-sc/VASP  

Unit cell parameters were taken from the [phonopy](http://phonopy.sourceforge.net) example folder. Silicon unit cell contains 8 atoms, thus 24 frequencies (phonons), three acoustic close to zero.  

For this example `vasp_raman.py` script version [0.5.1] (https://raw.github.com/raman-sc/VASP/3cb3cdf0682609365c4b966472ef6eb5be1defc5/vasp_raman.py) was used.  

[**Download complete example.**](https://github.com/raman-sc/VASP/raw/master/Sibulk-VASP/Sibulk-VASP-vasp_raman-0.5.1.tar.gz)  

Raman intensities for all modes will be computed in one go. For the multi-step procedure see [Cyclopentadiene example](https://github.com/raman-sc/VASP/tree/master/Cyclopentadiene).  


## file structure-tree  
here________________________________________________________________________________________   
 |                                                                                          |  
 |# for phonon calculation                                                                  |  
 |-- [dir] PHONON                                                                           |  
 |   |-- file POSCAR, KPOINTS, INCAR, POTCAR, submit_file                                   |  
 |   | sample file in PHONON.eg                                                             |  
 |                                                                                          |  
 |-- [file] POSCAR.phon = ln -s PHONON/POSCAR POSCAR.phon                                   |  
 |-- [file] OUTCAR.phon = ln -s PHONON/OUTCAR OUTCAR.phon                                   |  
 |                                                                                          |  
 |# for disp_POSCAR calculation                                                             |  
 |-- [file] KPOINTS = should be Gamma-central                                               |  
 |-- [file] INCAR = should be NWRITE = 3                                                    |  
 |-- [file] POTCAR                                                                          |  
 | sample file in disp.eg                                                                   |  
 |                                                                                          |  
 |# for disp_POSCAR calculation                                                             |  
 |-- [dir] disp_POSCAR                                                                      |  
 |   |-- [file] POSCAR.*.* = generated by ^1_raman_gen_POS.py                               |  
 |   |-- [dir] str.*.* = generated by ^2_raman_vasp.sh or ^2_raman_sbatch                   |  
 |-- [file] alist = index for each displacement, generate by ^1_raman_gen_POS.py            |  
 |                                                                                          |    
 |# finish VASP calculation for each disp_POSCAR                                            |  
 |-- [file] OUTCAR.*.*.out = ln -s disp_POSCAR/str.*.*/OUTCAR                               |  
 |-- [file] vasp_raman.dat = generated by ^3_raman_spectrum.py                              |  
 |__________________________________________________________________________________________|    


(ref) Working directory should contain the following files (`FAT` file system has different soft linking ways):
```
INCAR        - should contain LEPSILON=.TRUE. or LCALCEPS=.TRUE. because we want 'MACROSCOPIC STATIC DIELECTRIC TENSOR' in the OUTCAR
KPOINTS      - just kpoints (soft link of the KPOINTS file from the PHONON folder, to prevent errors)
OUTCAR.phon  - should contain 'Eigenvectors after division by SQRT(mass)' either from VASP (soft link of the OUTCAR file from the PHONON folder)
POSCAR.phon  - VASP5 format is *required* (atomic symbols and numbers), at this point only positive scales are supported (soft link of the POSCAR file from the PHONON folder)
POTCAR       - `PAW_PBE Si 05Jan2001` PP (soft link to the POTCAR file from the PHONON folder)
raman.sub    - shell script for the scheduler to *do the deed*
```

## TOC

[Theory](#theory)  
[Installation](#installation)  
[Global variables](#global-variables)  
[Examples](#examples)  
[How to cite](#how-to-cite)  

## Theory

In order to calculate off-resonance Raman activity of a mode, one needs to compute the derivative of the polarizability (or macroscopic dielectric tensor) with respect to that normal mode coordinate: `dP/dQ` (or `de/dQ`).  
Thus, two ingredients are required:

 1. Phonons at Γ-point
 2. Macroscopic dielectric tensor

### Phonons at Γ-point
In VASP, phonons at Γ-point can be computed using either:

 * finite displacements: `IBRION=5` or `IBRION=6`; or
 * density functional perturbation theory (DFPT): `IBRION=7` or `IBRION=8`.

Only finite displacements are available when hybrid functional is employed.

### Macroscopic dielectric tensor
In VASP, macroscopic dielectric tensor can be computed using either:
 * DFPT: `LEPSILON=.TRUE.`
 * or from frequency dependent dielectric matrix calculation: `LOPTICS=.TRUE.`.

In the latter case, hybrids functionals could be employed.  
For a more formal description of the method see [D. Porezag, M.R. Pederson, PRB, 54, 7830 (1996)](http://doi.org/10.1103/PhysRevB.54.7830).

## Installation

Python3 is required.

## Global variables

**requires** one environmental variables to be set:

  - `VASP_RAMAN_PARAMS` is defined as `FIRST-MODE_LAST-MODE_NDERIV_STEPSIZE` where:
      - `FIRST_MODE` - integer, first mode for which derivative of the polarizability is computed
      - `LAST-MODE`  - integer, last mode for which derivative of the polarizability is computed
      - `NDERIV`     - integer, scheme for finite difference, **currently** only value `2` is supported
      - `STEPSIZE`   - float, step-size for finite difference, in Angstroms
        
    Example: `VASP_RAMAN_PARAMS=01_10_2_0.01`

The variables should be `exported` (in Bash language) before running other python script.  

## Examples

* [Raman activity spectrum for Si using VASP](https://github.com/raman-sc/VASP/tree/master/Sibulk-VASP)
* [Raman activity spectrum for Si using VTST tools](https://github.com/raman-sc/VASP/tree/master/Sibulk-VTST)
* [Raman activity spectrum for cyclopentadiene using VASP](https://github.com/raman-sc/VASP/tree/master/Cyclopentadiene)
* [Raman activity spectrum for Si using VTST tools and PW91 functional](https://github.com/raman-sc/VASP/tree/master/Sibulk)

## How to cite

Use [Bibtext](https://raw.githubusercontent.com/raman-sc/VASP/master/vasp_raman_py.bib) or [RIS](https://raw.githubusercontent.com/raman-sc/VASP/master/vasp_raman_py.ris) file for citation.

